<div class="main-content">
    <h2 class="text-center mb-4">Perfil de Usuario</h2>

    <!-- Tabs with RouterLink -->
    <ul class="nav nav-tabs justify-content-center mb-4">
        <li class="nav-item">
            <a class="nav-link" [ngClass]="{'active': activeTab === 'datos'}" 
               (click)="setActiveTab('datos')" 
               [routerLink]="['/datosPerfilUsuario']">
               Datos de Usuario
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" [ngClass]="{'active': activeTab === 'historial'}" 
               (click)="setActiveTab('historial')" 
               [routerLink]="['/perfilUsuario']">
               Historial de Compras
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" [ngClass]="{'active': activeTab === 'deseos'}" 
               (click)="setActiveTab('deseos')" 
               [routerLink]="['/listaDeseos']">
               Lista de Deseos
            </a>
        </li>
    </ul>

    <!-- User Form (Datos de Usuario) -->
    <div class="form-container" *ngIf="activeTab === 'datos'">
        <p class="text-muted mb-4">Actualiza tu información personal y contraseña</p>
        <form [formGroup]="userProfileForm" (ngSubmit)="onSubmit()">
            <div class="row">
                <div class="col-md-8">
                    <div class="form-group mb-3">
                        <label for="cedula" class="form-label">Cédula</label>
                        <input type="text" class="form-control" id="cedula" formControlName="cedula"
                               [class.is-invalid]="cedulaControl?.invalid && cedulaControl?.touched">
                        <div class="invalid-feedback" *ngIf="cedulaControl?.errors?.['required']">La cédula es requerida</div>
                        <div class="invalid-feedback" *ngIf="cedulaControl?.errors?.['pattern']">La cédula solo debe contener números</div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="nombre" class="form-label">Nombre completo</label>
                        <input type="text" class="form-control" id="nombre" formControlName="nombre"
                               [class.is-invalid]="nombreControl?.invalid && nombreControl?.touched">
                        <div class="invalid-feedback" *ngIf="nombreControl?.errors?.['required']">El nombre es requerido</div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="direccion" class="form-label">Dirección</label>
                        <input type="text" class="form-control" id="direccion" formControlName="direccion"
                               [class.is-invalid]="direccionControl?.invalid && direccionControl?.touched">
                        <div class="invalid-feedback" *ngIf="direccionControl?.errors?.['required']">La dirección es requerida</div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="text" class="form-control" id="telefono" formControlName="telefono"
                               [class.is-invalid]="telefonoControl?.invalid && telefonoControl?.touched">
                        <div class="invalid-feedback" *ngIf="telefonoControl?.errors?.['required']">El teléfono es requerido</div>
                        <div class="invalid-feedback" *ngIf="telefonoControl?.errors?.['pattern']">El teléfono solo debe contener números</div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="email" class="form-label">Correo electrónico</label>
                        <input type="email" class="form-control" id="email" formControlName="email"
                               [class.is-invalid]="emailControl?.invalid && emailControl?.touched">
                        <div class="invalid-feedback" *ngIf="emailControl?.errors?.['required']">El correo electrónico es requerido</div>
                        <div class="invalid-feedback" *ngIf="emailControl?.errors?.['email']">Ingrese un correo electrónico válido</div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="password" class="form-label">Nueva Contraseña</label>
                        <input type="password" class="form-control" id="password" formControlName="password">
                    </div>

                    <div class="form-group mb-3">
                        <label for="confirmPassword" class="form-label">Confirmar Nueva contraseña</label>
                        <input type="password" class="form-control" id="confirmPassword" formControlName="confirmPassword">
                    </div>
                </div>
                <div class="col-md-4 text-center">
                    <div class="d-grid gap-3">
                        <button type="button" class="btn btn-dark" (click)="toggleEditMode()">
                            {{ isEditMode ? 'Cancelar edición' : 'Editar perfil' }}
                        </button>
                        <button type="button" class="btn btn-dark" (click)="deleteProfile()">Eliminar perfil</button>
                        <button type="submit" class="btn btn-dark" [disabled]="!isEditMode || !userProfileForm.valid">Guardar cambios</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- Placeholder content for Historial de Compras -->
    <div *ngIf="activeTab === 'historial'">
        <h3>Historial de Compras</h3>
        <p>Aquí se mostrará el historial de compras del usuario.</p>
        <!-- Agrega más contenido relacionado con el historial de compras -->
    </div>

    <!-- Placeholder content for Lista de Deseos -->
    <div *ngIf="activeTab === 'deseos'">
        <h3>Lista de Deseos</h3>
        <p>Aquí se mostrará la lista de deseos del usuario.</p>
        <!-- Agrega más contenido relacionado con la lista de deseos -->
    </div>
</div>
